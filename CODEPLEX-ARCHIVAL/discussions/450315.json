[
  {
    "Id": "1069483",
    "ThreadId": "450315",
    "Html": "I have created update package for Acrobat Reader 10.1 and approved it to a Vista SP2 client.<br />\n<br />\nI have imported WSUS Publisher self-signed cert on the vista client under Trusted Root Certification Authorities, Intermediate Certification Authorities and Trusted Publishers.<br />\n<br />\nI am getting below error : <br />\n<hr />\nAdobe Reader 10.1.0<br />\nInstallation date: ‎7/‎17/‎2013 12:52 PM<br />\nInstallation status: Failed<br />\nError details: Code 800B0109<br />\nUpdate type: Important<br />\nNo description available.<br />\n<hr />\n<h2>windowsupdate log file says :</h2>\n2013-07-17\t12:52:44:238\t1068\t648\tMisc\tValidating signature for C:\\Windows\\SoftwareDistribution\\Download\\b8104bb6424488e05fdc5ef9f7b8657b\\93becf169094e894066c35dabd0f829be56fd337:<br />\n2013-07-17\t12:52:44:379\t1068\t648\tMisc\t Microsoft signed: No<br />\n2013-07-17\t12:52:44:379\t1068\t648\tMisc\tWARNING: Digital Signatures on file C:\\Windows\\SoftwareDistribution\\Download\\b8104bb6424488e05fdc5ef9f7b8657b\\93becf169094e894066c35dabd0f829be56fd337 are not trusted: Error 0x800b0109<br />\n2013-07-17\t12:52:44:379\t1068\t648\tDnldMgr\tWARNING: File failed postprocessing, error = 800b0109<br />\n2013-07-17\t12:52:44:379\t1068\t648\tDnldMgr\tFailed file: URL = '<a href=\"http://wsusserver/Content/37/93BECF169094E894066C35DABD0F829BE56FD337.cab\" rel=\"nofollow\">http://wsusserver/Content/37/93BECF169094E894066C35DABD0F829BE56FD337.cab</a>', Local path = 'C:\\Windows\\SoftwareDistribution\\Download\\b8104bb6424488e05fdc5ef9f7b8657b\\93becf169094e894066c35dabd0f829be56fd337'<br />\n2013-07-17\t12:52:44:379\t1068\t648\tDnldMgr\tError 0x800b0109 occurred while downloading update; notifying dependent calls.<br />\n2013-07-17\t12:52:44:473\t1068\tebc\tAU\t&gt;&gt;##  RESUMED  ## AU: Download update [UpdateId = {C8C5E4E4-4C9A-4136-A8D0-93290E70D9A6}]<br />\n2013-07-17\t12:52:44:473\t1068\tebc\tAU\t  # WARNING: Download failed, error = 0x800B0109<br />\n2013-07-17\t12:52:44:473\t1068\tebc\tAU\t#########<br />\n2013-07-17\t12:52:44:473\t1068\tebc\tAU\t##  END  ##  AU: Download updates<br />\n2013-07-17\t12:52:44:473\t1068\tebc\tAU\t#############<br />\n2013-07-17\t12:52:44:488\t1068\tebc\tAU\tSetting AU scheduled install time to 2013-07-17 22:00:00<br />\n2013-07-17\t12:52:44:488\t1068\tebc\tAU\tCurrently showing Progress UX client - so not launching any other client<br />\n2013-07-17\t12:52:44:613\t1068\t94c\tAU\tGetting featured update notifications.  fIncludeDismissed = true<br />\n2013-07-17\t12:52:44:613\t1068\t94c\tAU\tNo featured updates available.<br />\n2013-07-17\t12:52:46:221\t1068\t94c\tAU\tBeginInteractiveInstall invoked for Install<br />\n2013-07-17\t12:52:46:221\t1068\t94c\tAU\tAuto-approved 0 update(s) for install (for Ux), installType=0<br />\n2013-07-17\t12:52:46:221\t1068\t94c\tAU\tWARNING: BeginInteractiveInstall failed, error = 0x8024000C<br />\n2013-07-17\t12:52:46:221\t2232\te64\tCltUI\tFATAL: BeginInteractiveInstall for install returned code 8024000C<br />\n2013-07-17\t12:52:46:221\t2232\te64\tCltUI\tWARNING: AU directive Interactive Progress is exiting due to error 8024000C<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\tAU received handle event<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\tUpdateDownloadProperties: 0 download(s) are still in progress.<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\tTriggering Offline detection (non-interactive)<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\tAU setting pending client directive to 'Install Complete Ux'<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\tWARNING: Pending directive, 'Install Complete Ux', is not applicable<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\t#############<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\t## START ##  AU: Search for updates<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\t#########<br />\n2013-07-17\t12:52:46:221\t1068\t3cc\tAU\t&lt;&lt;## SUBMITTED ## AU: Search for updates [CallId = {EB229063-08B6-478B-A937-89047EDC4C0A}]<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t*************<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t** START **  Agent: Finding updates [CallerId = AutomaticUpdates]<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t*********<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t  * Online = No; Ignore download priority = No<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t  * Criteria = &quot;IsInstalled=0 and DeploymentAction='Installation' or IsPresent=1 and DeploymentAction='Uninstallation' or IsInstalled=1 and DeploymentAction='Installation' and RebootRequired=1 or IsInstalled=0 and DeploymentAction='Uninstallation' and RebootRequired=1&quot;<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t  * ServiceID = {3DA21691-E39D-4DA6-8A4B-B43877BCB1B7} Managed<br />\n2013-07-17\t12:52:46:221\t1068\t3d4\tAgent\t  * Search Scope = {Machine}<br />\n2013-07-17\t12:53:06:621\t1068\t3d4\tAgent\t  * Added update {C8C5E4E4-4C9A-4136-A8D0-93290E70D9A6}.1 to search result<br />\n2013-07-17\t12:53:06:621\t1068\t3d4\tAgent\t  * Found 1 updates and 77 categories in search; evaluated appl. rules of 209 out of 2173 deployed entities<br />\n2013-07-17\t12:53:06:668\t1068\t3d4\tAgent\t*********<br />\n2013-07-17\t12:53:06:668\t1068\t3d4\tAgent\t**  END  **  Agent: Finding updates [CallerId = AutomaticUpdates]<br />\n2013-07-17\t12:53:06:668\t1068\t3d4\tAgent\t*************<br />\n2013-07-17\t12:53:06:668\t1068\t3d4\tReport\tREPORT EVENT: {12709CBC-7991-4D7F-A8E2-DC552BDBB90E}\t2013-07-17 12:52:44:473+0100\t1\t161\t101\t{C8C5E4E4-4C9A-4136-A8D0-93290E70D9A6}\t1\t800b0109\tAutomaticUpdatesWuApp\tFailure\tContent Download\tError: Download failed.<br />\n<h2>2013-07-17\t12:53:06:683\t1068\tebc\tAU\t&gt;&gt;##  RESUMED  ## AU: Search for updates [CallId = {EB229063-08B6-478B-A937-89047EDC4C0A}]</h2>\n",
    "PostedDate": "2013-07-17T05:02:32.633-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1069634",
    "ThreadId": "450315",
    "Html": "Hello VinodReddy,\r<br />\n<br />\nThe most important lines are :<br />\n<blockquote>\n2013-07-17 12:52:44:238 1068 648 Misc Validating signature for C:\\Windows\\SoftwareDistribution\\Download\\b8104bb6424488e05fdc5ef9f7b8657b\\93becf169094e894066c35dabd0f829be56fd337:<br />\n2013-07-17 12:52:44:379 1068 648 Misc Microsoft signed: No <br />\n2013-07-17 12:52:44:379 1068 648 Misc <strong>WARNING: Digital Signatures on file</strong> C:\\Windows\\SoftwareDistribution\\Download\\b8104bb6424488e05fdc5ef9f7b8657b\\93becf169094e894066c35dabd0f829be56fd337 <strong>are not trusted</strong>: Error 0x800b0109 <br />\n</blockquote>\nPlease verify :<br />\n<ul>\n<li>Certificate is in right certificate stores.</li>\n<li>Certificate is in Computer (this computer) profile store.</li>\n<li>You have enable TrustedPublisherCertificate : HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AcceptTrustedPublisherCerts = 1</li>\n<li>\nYou have restart the computer after imorting the certificate.<br />\n</li>\n</ul>\nTry to copy the file from : <a href=\"http://wsusserver/Content/37/93BECF169094E894066C35DABD0F829BE56FD337.cab\" rel=\"nofollow\">http://wsusserver/Content/37/93BECF169094E894066C35DABD0F829BE56FD337.cab</a> \r<br />\nto your local disk. Check properties, especially &quot;Numeric signature&quot; tab, select the certificate and clic on 'Detail'.<br />\n",
    "PostedDate": "2013-07-17T10:28:24.213-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1069929",
    "ThreadId": "450315",
    "Html": "Thanks DCourtel,\r<br />\n<br />\nReg key did the trick. It did not exist so I have created a DWORD, after which it worked like a charm.\r<br />\nNow the task will be to publish certificate, which can be done by GPo. But regkey will be a bit tricky for XP machines.\r<br />\n<br />\nHow safe is it to add this reg key... any security risks?<br />\n",
    "PostedDate": "2013-07-18T02:24:55.367-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1069943",
    "ThreadId": "450315",
    "Html": "Hi,<br />\n<blockquote>\nBut regkey will be a bit tricky for XP machines. <br />\n</blockquote>\nThere is a GPO for this setting : &quot;Administration Templates -&gt; Windows Components -&gt; Windows Updatec Components -&gt; <strong>'Allow Signed Content from intranet Microsoft update service location</strong>'<br />\n<blockquote>\nany security risks?<br />\n</blockquote>\nThis setting allows the WU agent to trust a package that have been signed by a trusted publisher. The certificate must be already in the TrustedPublisherCertificate store, so the risk is very low. To corrupt a machine, an attacker must first import a certificate in this store and then published a fake update in your Wsus (that's mean, know an account that have administrative privilege on tha attacked computer and on Wsus server) !<br />\n",
    "PostedDate": "2013-07-18T03:36:18.86-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1070369",
    "ThreadId": "450315",
    "Html": "Hi,\r<br />\n<br />\nMy bad. Have an old ADMX, have updated it now, will test it today. Hope it will work.\r<br />\n<br />\nAnother question if you dont mind.\r<br />\nI am not able to push Acrobat reader updates. I was following same insctuction as in publishing Reader. Should I be doing anything different?\r<br />\n<br />\nMany thanks,\r<br />\nVinod.<br />\n",
    "PostedDate": "2013-07-19T01:12:33.97-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1070375",
    "ThreadId": "450315",
    "Html": "Hi,<br />\n<blockquote>\nI am not able to push Acrobat reader updates. I was following same insctuction as in publishing Reader. Should I be doing anything different? <br />\n</blockquote>\nPlease, start a new discussion for this probleme and put a complete description of what you do and what happen.<br />\n",
    "PostedDate": "2013-07-19T01:36:41.677-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1087736",
    "ThreadId": "450315",
    "Html": "Hi Guys,\r<br />\n<br />\nI have the same prob as mentioned above but all certs in the right directorys. So I think.<br />\n<blockquote>\nPlease verify :<br />\n   Certificate is in right certificate stores.<br />\n   Certificate is in Computer (this computer) profile store.<br />\n   You have enable TrustedPublisherCertificate : HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AcceptTrustedPublisherCerts = 1<br />\n   You have restart the computer after imorting the certificate.<br />\n</blockquote>\nWhat's meant by point two? My certificate is in the trusted publisher folder aswell as in the trusted certificate authority folder (freely translated ;) ) at our server and one client for testing issues.\r<br />\n<br />\n<br />\n<strong>My Log:</strong>\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\t#############\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\t## START ##  AU: Download updates\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\t#########\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\t  # Approved updates = 1\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\tAU initiated download, updateId = {B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}.2, callId = {F4205188-FABA-46BF-9C0D-C6BEBF80FA91}\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\tSetting AU scheduled install time to 2013-09-05 02:00:00\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\tSuccessfully wrote event for AU health state:0\r<br />\n2013-09-03\t16:59:28:651\t1008\tfec\tAU\tCurrently showing Progress UX client - so not launching any other client\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tDnldMgr\t*************\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tDnldMgr\t** START **  DnldMgr: Downloading updates [CallerId = AutomaticUpdatesWuApp]\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tDnldMgr\t*********\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tDnldMgr\t  * Call ID = {F4205188-FABA-46BF-9C0D-C6BEBF80FA91}\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tDnldMgr\t  * Priority = 3, Interactive = 1, Owner is system = 0, Explicit proxy = 0, Proxy session id = 1, ServiceId = {3DA21691-E39D-4DA6-8A4B-B43877BCB1B7}\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tDnldMgr\t  * Updates to download = 1\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tAgent\t  *   Title = Java 7 Update 25\r<br />\n2013-09-03\t16:59:28:667\t1008\td30\tAgent\t  *   UpdateId = {B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}.2\r<br />\n2013-09-03\t16:59:28:683\t1008\td30\tDnldMgr\t***********  DnldMgr: New download job [UpdateId = {B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}.2]  ***********\r<br />\n2013-09-03\t16:59:28:683\t1008\td30\tDnldMgr\t  * Queueing update for download handler request generation.\r<br />\n2013-09-03\t16:59:28:683\t1008\td30\tDnldMgr\tGenerating download request for update {B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}.2\r<br />\n2013-09-03\t16:59:28:745\t1008\td30\tDnldMgr\t***********  DnldMgr: New download job [UpdateId = {B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}.2]  ***********\r<br />\n2013-09-03\t16:59:28:745\t1008\tfec\tAU\tSuccessfully wrote event for AU health state:0\r<br />\n2013-09-03\t16:59:28:745\t1008\tfec\tAU\t  # Pending download calls = 1\r<br />\n2013-09-03\t16:59:28:745\t1008\tfec\tAU\t&lt;&lt;## SUBMITTED ## AU: Download updates\r<br />\n2013-09-03\t16:59:28:761\t1008\tfec\tAU\tGetting featured update notifications.  fIncludeDismissed = true\r<br />\n2013-09-03\t16:59:28:761\t1008\tfec\tAU\tNo featured updates available.\r<br />\n2013-09-03\t16:59:28:885\t1008\td30\tDnldMgr\t  * BITS job initialized, JobId = {4A67DFAC-8321-4A47-B4D7-CACA05BDC22A}\r<br />\n2013-09-03\t16:59:28:963\t1008\td30\tDnldMgr\t  * Downloading from <a href=\"http://10.1.2.11:8530/Content/A2/83E44A0643C76F99B8D5A1E5C1A418F3015AC6A2.cab\" rel=\"nofollow\">http://10.1.2.11:8530/Content/A2/83E44A0643C76F99B8D5A1E5C1A418F3015AC6A2.cab</a> to C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab (full file).\r<br />\n2013-09-03\t16:59:29:197\t1008\td30\tAgent\t*********\r<br />\n2013-09-03\t16:59:29:197\t1008\td30\tAgent\t**  END  **  Agent: Downloading updates [CallerId = AutomaticUpdatesWuApp]\r<br />\n2013-09-03\t16:59:29:197\t1008\td30\tAgent\t*************\r<br />\n2013-09-03\t16:59:32:239\t1008\t8dc\tDnldMgr\tBITS job {4A67DFAC-8321-4A47-B4D7-CACA05BDC22A} completed successfully\r<br />\n2013-09-03\t16:59:32:457\t1008\t8dc\tMisc\tValidating signature for C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab:\r<br />\n2013-09-03\t16:59:32:567\t1008\t8dc\tMisc\tWARNING: Error: 0x800b0109 when verifying trust for C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab\r<br />\n2013-09-03\t16:59:32:567\t1008\t8dc\tMisc\tWARNING: Digital Signatures on file C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab are not trusted: Error 0x800b0109\r<br />\n2013-09-03\t16:59:32:582\t1008\t8dc\tDnldMgr\tWARNING: File failed postprocessing, error = 800b0109\r<br />\n2013-09-03\t16:59:32:582\t1008\t8dc\tDnldMgr\tFailed file: URL = '<a href=\"http://10.1.2.11:8530/Content/A2/83E44A0643C76F99B8D5A1E5C1A418F3015AC6A2.cab\" rel=\"nofollow\">http://10.1.2.11:8530/Content/A2/83E44A0643C76F99B8D5A1E5C1A418F3015AC6A2.cab</a>', Local path = 'C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab'\r<br />\n2013-09-03\t16:59:32:582\t1008\t8dc\tDnldMgr\tError 0x800b0109 occurred while downloading update; notifying dependent calls.\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\t&gt;&gt;##  RESUMED  ## AU: Download update [UpdateId = {B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}]\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\t  # WARNING: Download failed, error = 0x800B0109\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\t#########\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\t##  END  ##  AU: Download updates\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\t#############\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\tSetting AU scheduled install time to 2013-09-05 02:00:00\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\tSuccessfully wrote event for AU health state:0\r<br />\n2013-09-03\t16:59:32:660\t1008\te28\tAU\tCurrently showing Progress UX client - so not launching any other client\r<br />\n2013-09-03\t16:59:32:660\t1008\td30\tReport\tREPORT EVENT: {EC69B3CF-AEC2-4D83-AF03-B748CBCED4F1}\t2013-09-03 16:59:32:660+0200\t1\t161\t101\t{B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9}\t2\t800b0109\tAutomaticUpdatesWuApp\tFailure\tContent Download\tError: Download failed.\r<br />\n2013-09-03\t16:59:32:676\t1008\te28\tAU\tSuccessfully wrote event for AU health state:0\r<br />\n2013-09-03\t16:59:32:738\t1008\td30\tReport\tCWERReporter::HandleEvents - WER report upload completed with status 0x8\r<br />\n2013-09-03\t16:59:32:738\t1008\td30\tReport\tWER Report sent: 7.6.7600.256 0x800b0109 B6E3D9C3-A7D5-4AFC-84B1-620703CAA9E9 Download 101 Managed\r<br />\n2013-09-03\t16:59:32:738\t1008\td30\tReport\tCWERReporter finishing event handling. (00000000)\r<br />\n2013-09-03\t16:59:32:738\t1008\t72c\tAU\tGetting featured update notifications.  fIncludeDismissed = true\r<br />\n2013-09-03\t16:59:32:738\t1008\t72c\tAU\tNo featured updates available.\r<br />\n2013-09-03\t16:59:32:785\t1008\tfec\tAU\tBeginInteractiveInstall invoked for Install\r<br />\n2013-09-03\t16:59:32:785\t1008\tfec\tAU\tAuto-approved 0 update(s) for install (for Ux), installType=0\r<br />\n2013-09-03\t16:59:32:785\t1008\tfec\tAU\tWARNING: BeginInteractiveInstall failed, error = 0x8024000C\r<br />\n2013-09-03\t16:59:32:910\t1008\t808\tAU\tAU received handle event\r<br />\n2013-09-03\t16:59:32:910\t1008\t808\tAU\tUpdateDownloadProperties: 0 download(s) are still in progress.\r<br />\n2013-09-03\t16:59:32:910\t1008\t808\tAU\tTriggering Offline detection (non-interactive)\r<br />\n2013-09-03\t16:59:32:910\t1008\t808\tAU\tAU setting pending client directive to 'Install Complete Ux'\r<br />\n2013-09-03\t16:59:32:910\t1008\t808\tAU\tWARNING: Pending directive, 'Install Complete Ux', is not applicable\r<br />\n2013-09-03\t16:59:32:925\t1008\t808\tAU\tSuccessfully wrote event for AU health state:0\r<br />\n2013-09-03\t16:59:32:925\t1008\t808\tAU\t#############\r<br />\n2013-09-03\t16:59:32:925\t1008\t808\tAU\t## START ##  AU: Search for updates\r<br />\n2013-09-03\t16:59:32:925\t1008\t808\tAU\t#########\r<br />\n2013-09-03\t16:59:32:925\t1008\t808\tAU\t&lt;&lt;## SUBMITTED ## AU: Search for updates [CallId = {B6FAFFFB-60DB-4609-9E7A-975C91F78538}]\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t*************\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t** START **  Agent: Finding updates [CallerId = AutomaticUpdates]\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t*********\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t  * Online = No; Ignore download priority = No\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t  * Criteria = &quot;IsInstalled=0 and DeploymentAction='Installation' or IsPresent=1 and DeploymentAction='Uninstallation' or IsInstalled=1 and DeploymentAction='Installation' and RebootRequired=1 or IsInstalled=0 and DeploymentAction='Uninstallation' and RebootRequired=1&quot;\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t  * ServiceID = {3DA21691-E39D-4DA6-8A4B-B43877BCB1B7} Managed\r<br />\n2013-09-03\t16:59:32:925\t1008\td30\tAgent\t  * Search Scope = {Machine}\r<br />\n<br />\nThanks in advance for some help.\r<br />\n<br />\nRegards,\r<br />\ntreefishy<br />\n",
    "PostedDate": "2013-09-03T08:15:24.44-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1087850",
    "ThreadId": "450315",
    "Html": "Hi treefishy,<br />\n<blockquote>\n2013-09-03 16:59:32:567 1008 8dc Misc WARNING: Error: 0x800b0109 when verifying trust for C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab <br />\n2013-09-03 16:59:32:567 1008 8dc Misc WARNING: <strong>Digital Signatures on file</strong> C:\\Windows\\SoftwareDistribution\\Download\\a947508375d533852b553315874f5194\\1e5cec4d-6673-4181-bf67-b5a2b2e7d75d_1.cab <strong>are not trusted</strong>: Error 0x800b0109<br />\n</blockquote>\nEnsure Wsus Certificate is correctly set on the <strong>server</strong> :<br />\n<img src=\"http://i.imgur.com/uOXJ1C6.png\" alt=\"Wsus Server Certificate\" /><br />\n<br />\nLook in the <strong>Local Computer Store</strong><br />\n<ul>\n<li>If you are using your own Code-Signing certificate, it should be present in : <br />\n◦ The Certificate of the authority who have made this certificate should be in the (Local Computer)\\Trusted Root Certification Authority.<br />\n◦ (Local Computer)\\Trusted Publisher.<br />\n◦ (Local Computer)\\Wsus<br />\n.</li>\n<li>\nIf you are using a Self-Signed Certificate, it should be present in :<br />\n◦ (Local Computer)\\Trusted Root Certification Authority.<br />\n◦ (Local Computer)\\Trusted Publisher.<br />\n◦ (Local Computer)\\Wsus<br />\n</li>\n</ul>\nEnsure the certificate is correctly set on your <strong>client</strong> :<br />\n<img src=\"http://i.imgur.com/vySMS8i.png\" alt=\"Client Cert\" /><br />\n<br />\nLook in the <strong>Local Computer Store</strong><br />\n<ul>\n<li>\nIf you are using a Self-Signed Certificate, it should be present in : <br />\n◦ (Local Computer)\\Trusted Publisher.<br />\n◦ (Local Computer)\\Trusted Root Certification Authority.<br />\n</li>\n<li>\nIf you are using your own Code-Signing certificate, it should be present in : <br />\n◦ (Local Computer)\\Trusted Publisher.<br />\n◦ And the Certificate of the authority who have made this certificate should be in the (Local Computer)\\Trusted Root Certification Authority.<br />\n</li>\n</ul>\nIf all is ok. Open WPP, select the update and copy the URL path. Copy it in Internet Explorer and download the file to the desktop.<br />\n<img src=\"http://i.imgur.com/CZvXS9G.png\" alt=\"Copy URL\" /><br />\n<br />\nDisplay the properties of the file, go to &quot;Numeric signature' tab :<br />\n<img src=\"http://i.imgur.com/wPd7k8W.png\" alt=\"Signature numérique\" /><br />\n<br />\nSelect the cert and click 'Details'.<br />\n<img src=\"http://i.imgur.com/gJNK8Xu.png\" alt=\"Cert details\" /><br />\n<br />\nWhat is the error message ?<br />\n<br />\n<img src=\"http://i.imgur.com/8wtsDhP.png\" alt=\"Image\" /><br />\n<br />\nNote the serial number of the certificate. Open the certificate of your client (in trusted publishers) and compare the serial number of this certificate with the certificate used to signe the CAB file. Does these equal or different ?<br />\n",
    "PostedDate": "2013-09-03T11:50:59.803-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1088854",
    "ThreadId": "450315",
    "Html": "Wooowww, thanks for you reply.\r<br />\n<br />\nI found my personal failure -.-\r<br />\nThanks to your short manual I found out that all the time my policy just installed the certificates to the users account and not our client machines. Thanks a lot.\r<br />\n<br />\nBTW: The numbers are equal. Of cause :D\r<br />\n<br />\nRegards,\r<br />\ntreefishy<br />\n",
    "PostedDate": "2013-09-05T10:14:14.087-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": "2013-10-05T05:10:44.173-07:00"
  },
  {
    "Id": "1088876",
    "ThreadId": "450315",
    "Html": "<blockquote>\ninstalled the certificates to the users account and not our client machines<br />\n</blockquote>\nGood to know. I need to update the &quot;Installation guide&quot;, so that admin take care of this detail.<br />\n",
    "PostedDate": "2013-09-05T10:52:37.577-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1088878",
    "ThreadId": "450315",
    "Html": "Would be very helpful for some folks. Even the detail for server 2003 users how to enroll the certificate correctly.\r<br />\nBut thank you very much!<br />\n",
    "PostedDate": "2013-09-05T10:56:09.873-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1089560",
    "ThreadId": "450315",
    "Html": "Hi,<br />\nI have the same problem but I don´t see the certificate on Wsus server in Wsus-Certificates store.<br />\nI dont know why?<br />\n<br />\n<br />\nI have windows server 2012, wsus 6.2.9200 and wpp 1.3.1309.3. <br />\n<br />\nThank you<br />\n",
    "PostedDate": "2013-09-07T07:14:50.44-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1089576",
    "ThreadId": "450315",
    "Html": "Hi, You will not be able to publish until you have a code-signing certificate in the Wsus store.<br />\n<ul>\n<li>\nIf you have your own Root Authority :<br />\n<ul>\n<li>Create your own Code-Signing certificate from your PKI server. And export it as a .pfx file.</li>\n<li>Start WPP locally on the Wsus server.</li>\n<li>Connect to your Wsus server (ensure that in Setting, the checkbox &quot;Connect to local server&quot; is checked)</li>\n<li>Go to Tools -&gt; Certificate</li>\n<li>Enter the password of the certificate.</li>\n<li>Click on &quot;Load a certificate&quot;</li>\n<li>\nEnsure the certificate of the Root authority themselve is present in the &quot;Trusted Root Authorities&quot; store<br />\n</li>\n</ul>\n</li>\n<li>\nIf you don't have your own Root authority :<br />\n<ul>\n<li>Start WPP (it can be done on a remote computer or directly on the server, it's better if it's on the Wsus server)</li>\n<li>Connect to your Wsus Server.</li>\n<li>Go to Tools -&gt; Certificate.</li>\n<li>Click on &quot;Generate the certificate&quot;</li>\n<li>RESTART the Wsus server.</li>\n</ul>\n</li>\n</ul>\n",
    "PostedDate": "2013-09-07T09:47:40.943-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": "2013-10-05T05:11:21.97-07:00"
  },
  {
    "Id": "1122272",
    "ThreadId": "450315",
    "Html": "<strong>DCourtel wrote:</strong><br />\n<blockquote>\nThere is a GPO for this setting : &quot;Administration Templates -&gt; Windows Components -&gt; Windows Updatec Components -&gt; <strong>'Allow Signed Content from intranet Microsoft update service location</strong>'<br />\n<br />\nThis setting allows the WU agent to trust a package that have been signed by a trusted publisher. The certificate must be already in the TrustedPublisherCertificate store, so the risk is very low. To corrupt a machine, an attacker must first import a certificate in this store and then published a fake update in your Wsus (that's mean, know an account that have administrative privilege on tha attacked computer and on Wsus server) !<br />\n</blockquote>\nWould be very nice, if this on had a place in the documentation.<br />\n",
    "PostedDate": "2013-11-12T02:40:35.273-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1122338",
    "ThreadId": "450315",
    "Html": "That's already there: <a href=\"https://www.codeplex.com/Download?ProjectName=WsusPackagePublisher&amp;DownloadId=742282\" rel=\"nofollow\">https://www.codeplex.com/Download?ProjectName=WsusPackagePublisher&DownloadId=742282</a> Page 5\r<br />\n<br />\nRegards\r<br />\nNorbert<br />\n",
    "PostedDate": "2013-11-12T06:08:43.163-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1328692",
    "ThreadId": "450315",
    "Html": "I've been using this product for about a year and would like to share my experience re certificates - I hope this is the right place ! \r<br />\nFeel free to change/delete anything that is wrong\r<br />\n<br />\n1) Self signed certificates are only valid for 365 days.\r<br />\n2) When you generate your new certificate leave the old one in place (ie don't remove it from Group Policy)\r<br />\n3) create your certificate 60 days before the old one expires (you need to get all NON MS updates installed using a valid certificate - updates approved NOW with the old certificate will only be valid until the certificate expires)\r<br />\n4) When you add your new certificate to WPP remember that all updates created from this point on will have the new certificate - any updates sent to WSUS prior to this will have the old certificate - hence point 2 - leave your old certificate in place.\r<br />\n5) Once the old certificate has expired 're-publish' all non MS updates.  ie remove them and then put them back with the new certificate.\r<br />\n<br />\nI hope the above helps<br />\n",
    "PostedDate": "2014-12-04T03:06:03.543-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1328702",
    "ThreadId": "450315",
    "Html": "<blockquote>\n5) Once the old certificate has expired 're-publish' all non MS updates. ie remove them and then put them back with the new certificate. <br />\n</blockquote>\nNo needs to re-publish, just re-sign already published updates (right-click, resign). It's faster.<br />\n",
    "PostedDate": "2014-12-04T03:20:15.627-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]